## First steps

In order to not to lose the session when we're logged in and when we refresh the page we need to store the login data in a session. We'll use a library called Flask Login for that, so we'll type ``pip install flask-login`` in the terminal. Now we'll import the library, invoke it and wrap the entire app in it in the configuration parts of the backend:

```
from flask_login import LoginManager, UserMixin

login_manager = LoginManager()

login_manager.init_app(app)
```

By default, Flask Login uses sessions for authentication and it requires a secret key, so we'll store it elsewhere.

To generate a secret key, type ``python -c 'import secrets; print(secrets.token_hex())'``.

We have to pass some properties to the User class, but they're already prebuilt in the flask-login library: UserMixin, so our class inherits those properties.

```
class User(db.Model, UserMixin):
    user_id = db.Column(db.Integer, autoincrement=True, primary_key=True)
    user_name = db.Column(db.String(30), unique=True, nullable=False)
    user_email = db.Column(db.String(50), unique=False, nullable=False)
    user_password = db.Column(db.String(100), unique=False, nullable=False)
```

We also need to import a couple of dependencies to secure passwords in:

```
from werkzeug.security import generate_password_hash, check_password_hash
```

From there, in the initialization for our class, we'll add this:

```
 def __init__(self, user_name, user_email, user_password):
        self.user_name = user_name
        self.user_email = user_email
        self.user_password = generate_password_hash(user_password)

    def set_password(self, user_password):
        self.password = generate_password_hash(user_password)
    def check_password(self, user_password):
        return check_password_hash(self.password, user_password)
```

Now 